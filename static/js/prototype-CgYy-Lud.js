import{_ as k,r as A}from"./index-DL5Tmjf3.js";import{o as c,c as l,a as i,F as b,a7 as w,R as d,T as p,av as M,aw as $,U as C,ah as S,as as V}from"./@vue-DE00ZNZ5.js";import{S as O,P as T,W as x,O as B,V as y,G as R,A as W,D as H}from"./three-C4bHvUaY.js";import{i as N}from"./element-plus-CRrA4s9w.js";import"./vue-router-DXe9n6bk.js";import"./lodash-es-WEemOz_S.js";import"./@vueuse-CGsx6Jjg.js";import"./@element-plus-DgGNcXce.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-Ct2Knyoi.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-CtcGg-6p.js";const z={props:{selectedItems:{type:Array,default:()=>[]}},data(){return{isVisible:!1,shoppingItems:[{name:"Tissue Paper"},{name:"Milk"},{name:"Detergent"}]}},methods:{show(){this.isVisible=!0},close(){this.isVisible=!1},isItemChecked(e){return this.selectedItems.includes(e)}}},E={key:0,class:"shopping-list-container"},F=i("h2",null,"Shopping List",-1),U=["id","checked"],Y=["for"];function q(e,s,h,m,n,t){return n.isVisible?(c(),l("div",E,[F,i("ul",null,[(c(!0),l(b,null,w(n.shoppingItems,(o,u)=>(c(),l("li",{key:u},[i("input",{type:"checkbox",id:`item-${u}`,checked:t.isItemChecked(o.name),disabled:""},null,8,U),i("label",{for:`item-${u}`},p(o.name),9,Y)]))),128))]),i("button",{onClick:s[0]||(s[0]=(...o)=>t.close&&t.close(...o))},"Close")])):d("",!0)}const G=k(z,[["render",q]]),Q={data(){return{visible:!1,shoppingItems:[{name:"Tissue Paper",section:"Personal Care Section"},{name:"Milk",section:"Beverages Section"},{name:"Detergent",section:"Cleaning Supplies Section"}],selectedItem:null,selectedSection:""}},methods:{show(){this.visible=!0},close(){this.visible=!1},hide(){this.visible=!1,this.selectedItem=null,this.selectedSection=""},selectItem(e){this.selectedItem=e,this.selectedSection=e.section}}},D=e=>(M("data-v-f1296a71"),e=e(),$(),e),j={key:0,class:"dialogue-container"},J=D(()=>i("p",null,"Hi! What can I help you with?",-1)),K={class:"items-container"},X=D(()=>i("p",null,"Do you need help finding the following items?",-1)),Z=["onClick"],ee={key:0,class:"result"};function te(e,s,h,m,n,t){return n.visible?(c(),l("div",j,[J,i("div",K,[X,i("ul",null,[(c(!0),l(b,null,w(n.shoppingItems,o=>(c(),l("li",{key:o.name},[i("button",{onClick:u=>t.selectItem(o)},p(o.name),9,Z)]))),128))])]),n.selectedSection?(c(),l("p",ee,"You can find "+p(n.selectedItem.name)+" in the "+p(n.selectedSection)+".",1)):d("",!0),i("button",{onClick:s[0]||(s[0]=(...o)=>t.close&&t.close(...o))},"Close")])):d("",!0)}const se=k(Q,[["render",te],["__scopeId","data-v-f1296a71"]]),oe=""+new URL("../png/map-B0zd8MBI.png",import.meta.url).href,ne={data(){return{visible:!1,map:oe}},methods:{show(){this.visible=!0},hide(){this.visible=!1,this.$emit("closed")}}},ie={key:0,class:"map-container"},ce=["src"];function le(e,s,h,m,n,t){return n.visible?(c(),l("div",ie,[i("img",{src:n.map,alt:"Store Map"},null,8,ce),i("button",{onClick:s[0]||(s[0]=(...o)=>t.hide&&t.hide(...o))},"Close")])):d("",!0)}const re=k(ne,[["render",le],["__scopeId","data-v-a6104927"]]),ae={props:{visible:{type:Boolean,required:!0}},data(){return{product:{name:"Milk",price:"$3.99",description:"A fresh and natural milk with high-quality standards.",ingredients:["Cow Milk","Vitamin D"]}}},methods:{selectProduct(){this.$emit("selected",this.product)},close(){this.$emit("close")}}},pe={key:0,class:"product-info-container"},ue={class:"product-details"},de={class:"product-actions"};function he(e,s,h,m,n,t){return h.visible?(c(),l("div",pe,[i("div",ue,[i("h3",null,p(n.product.name),1),i("p",null,"Price: "+p(n.product.price),1),i("p",null,"Description: "+p(n.product.description),1),i("p",null,"Ingredients: "+p(n.product.ingredients.join(", ")),1)]),i("div",de,[i("button",{onClick:s[0]||(s[0]=(...o)=>t.selectProduct&&t.selectProduct(...o))},"Select"),i("button",{onClick:s[1]||(s[1]=(...o)=>t.close&&t.close(...o))},"Close")])])):d("",!0)}const me=k(ae,[["render",he],["__scopeId","data-v-65ef13fd"]]),fe=""+new URL("../png/pay-LaQfS5PE.png",import.meta.url).href,ge={data(){return{visible:!1,currentStep:0,steps:[{message:"Hello! Welcome to our Supermarket. May I scan your items?",options:["Yes please.","No thanks."],img:null},{message:"The total price is $10. Would you like any bags?",options:["Yes one bag please.","No thanks."],img:null},{message:"Ok! What kind of payment would you like to use?",options:["QR Code","Octopus Card","Passcode"],img:fe},{message:"This is your receipt. Have a nice day!",options:["Thanks! You too!"],img:null}],currentMessage:"",currentOptions:[],currentimg:null,showOptions:!0,showCloseButton:!1}},methods:{showDialog(){this.visible=!0,this.currentStep=0,this.updateStep()},closeDialog(){this.visible=!1},handleOption(e){console.log("Selected option:",e),this.currentStep<this.steps.length-1?(this.currentStep++,this.updateStep()):(this.showOptions=!1,this.showCloseButton=!0)},updateStep(){const e=this.steps[this.currentStep];this.currentMessage=e.message,this.currentOptions=e.options,this.currentimg=e.img,this.showOptions=e.options.length>0}}},ke={key:0,class:"checkout-dialog"},_e={class:"message"},Ce=["src"],Se={key:1,class:"options"},ve=["onClick"];function be(e,s,h,m,n,t){return n.visible?(c(),l("div",ke,[i("div",_e,p(n.currentMessage),1),n.currentimg?(c(),l("img",{key:0,src:n.currentimg,alt:"pay"},null,8,Ce)):d("",!0),n.showOptions?(c(),l("div",Se,[(c(!0),l(b,null,w(n.currentOptions,o=>(c(),l("button",{key:o,onClick:u=>t.handleOption(o)},p(o),9,ve))),128))])):d("",!0),n.showCloseButton?(c(),l("button",{key:2,onClick:s[0]||(s[0]=(...o)=>t.closeDialog&&t.closeDialog(...o))},"Close")):d("",!0)])):d("",!0)}const we=k(ge,[["render",be],["__scopeId","data-v-4aad95ae"]]),f=new O,a=new T(75,window.innerWidth/window.innerHeight,.1,1e3),v=new x,g=new B(a,v.domElement),Ie={name:"SupermarketScene",components:{ShoppingList:G,ShopAssistantDialogue:se,MapComponent:re,ProductInfo:me,CheckoutDialog:we},data(){return{isProductInfoVisible:!1,selectedShoppingItems:[]}},mounted(){this.initScene()},methods:{onShoppingListClick(){this.$refs.shoppingList.show()},onShopAssistanceClick(){a.position.set(-2,1,7),setTimeout(()=>{this.$refs.shopAssistantDialogue&&this.$refs.shopAssistantDialogue.show()},700)},onMapClick(){a.position.set(0,180,0),setTimeout(()=>{this.$refs.mapComponent&&this.$refs.mapComponent.show()},700)},onCheckoutClick(){a.position.set(-44,2,-30);const e=new y(0,0,-100);a.lookAt(e),g.target.set(e.x,e.y,e.z),g.update(),setTimeout(()=>{this.$refs.checkoutDialog&&this.$refs.checkoutDialog.showDialog()},700)},onResetClick(){a.position.set(0,0,10);const e=new y(0,0,0);a.lookAt(e),g.target.set(e.x,e.y,e.z),g.update()},onPickClick(){a.position.set(55,0,30),setTimeout(()=>{this.isProductInfoVisible=!0},700)},handleProductSelected(e){console.log("Selected product:",e.name),this.selectedShoppingItems.push(e.name),this.isProductInfoVisible=!1},initScene(){v.setSize(window.innerWidth,window.innerHeight),this.$refs.canvasContainer.appendChild(v.domElement);const e="/3dmarket/scene.gltf",s=new R;s.load("/3dwomen/scene.gltf",function(o){const u=o.scene.children[0];f.add(o.scene),o.scene.position.set(1,-3,2),o.scene.scale.set(3.3,3.3,3.3);const _=u.clone();_.position.set(-44,-3,-36),_.scale.set(3.3,3.3,3.3),f.add(_)}),s.load(e,function(o){f.add(o.scene),o.scene.position.set(-25,-3,-70),o.scene.scale.set(1,1,1)});const m=new W(16777215,.5);f.add(m);const n=new H(16777215,.8);n.position.set(0,1,1),f.add(n),a.position.set(0,0,10),g.update();const t=function(){requestAnimationFrame(t),g.update(),v.render(f,a)};t()}}},ye={class:"ui-container"},De={ref:"canvasContainer",class:"canvas-container"};function Pe(e,s,h,m,n,t){const o=S("ProductInfo"),u=S("ShoppingList"),_=S("ShopAssistantDialogue"),P=S("MapComponent"),L=S("CheckoutDialog");return c(),l(b,null,[i("div",ye,[i("div",{class:"button",onClick:s[0]||(s[0]=(...r)=>t.onShoppingListClick&&t.onShoppingListClick(...r))},"Shopping List"),i("div",{class:"button",onClick:s[1]||(s[1]=(...r)=>t.onShopAssistanceClick&&t.onShopAssistanceClick(...r))},"Shop Assistance"),i("div",{class:"button",onClick:s[2]||(s[2]=(...r)=>t.onMapClick&&t.onMapClick(...r))},"Map"),i("div",{class:"button",onClick:s[3]||(s[3]=(...r)=>t.onPickClick&&t.onPickClick(...r))},"Pick Up Demo"),i("div",{class:"button",onClick:s[4]||(s[4]=(...r)=>t.onCheckoutClick&&t.onCheckoutClick(...r))},"Checkout"),i("div",{class:"button",onClick:s[5]||(s[5]=(...r)=>t.onResetClick&&t.onResetClick(...r))},"Reset"),C(o,{visible:n.isProductInfoVisible,onSelected:t.handleProductSelected,onClose:s[6]||(s[6]=r=>n.isProductInfoVisible=!1)},null,8,["visible","onSelected"])]),C(u,{ref:"shoppingList",selectedItems:n.selectedShoppingItems},null,8,["selectedItems"]),C(_,{ref:"shopAssistantDialogue"},null,512),C(P,{ref:"mapComponent"},null,512),C(L,{ref:"checkoutDialog"},null,512),i("div",De,null,512)],64)}const Le=k(Ie,[["render",Pe]]),I=V(Le);I.use(N);I.use(A);I.mount("#app-prototype");
